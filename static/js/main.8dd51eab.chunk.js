(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports={loader:"Spiner_loader__1-JaW",inner:"Spiner_inner__9hysr",one:"Spiner_one__3Pwd6","rotate-one":"Spiner_rotate-one__1c3iY",two:"Spiner_two__sgeoy","rotate-two":"Spiner_rotate-two__1T-JT",three:"Spiner_three__34TKX","rotate-three":"Spiner_rotate-three__3C1uM"}},function(e,t,a){e.exports={SearchForm:"SearchForm_SearchForm__2V9v9",SearchForm_button:"SearchForm_SearchForm_button__1-7tx",SearchForm_button_label:"SearchForm_SearchForm_button_label__1_LU2",SearchForm_input:"SearchForm_SearchForm_input__9LkGG","SearchForm-input":"SearchForm_SearchForm-input__3Qt9T"}},,,,function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__B6VMq",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__1NBxZ"}},function(e,t,a){e.exports={Overlay:"Modal_Overlay__2GMCG",Modal:"Modal_Modal__zc-EP"}},,,function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__1t8pc"}},function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2WkNB"}},function(e,t,a){e.exports={Button:"Button_Button__QhhVS"}},,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(8),n=a.n(r),o=a(14),c=a(2),s=a(3),i=a(5),l=a(4),u=a(1),h=a.n(u),m=a(15),d=a.n(m),j=a(7),p=a.n(j),b=a(0),_=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchForm:""},e.SaveValue=function(t){e.setState({searchForm:t.target.value})},e.Submit=function(t){if(t.preventDefault(),""===e.state.searchForm.trim())return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"),void e.setState({searchForm:""});e.props.saveSubmit(e.state.searchForm.toLowerCase()),e.setState({searchForm:""})},e}return Object(s.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("form",{className:p.a.SearchForm,onSubmit:this.Submit,children:[Object(b.jsx)("button",{type:"submit",className:p.a.SearchForm_button,children:Object(b.jsx)("span",{className:p.a.SearchForm_button_label,children:"Search"})}),Object(b.jsx)("input",{className:p.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchForm,onChange:this.SaveValue})]})}}]),a}(u.Component),g=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.saveSubmit;return Object(b.jsx)("header",{className:d.a.Searchbar,children:Object(b.jsx)(_,{saveSubmit:e})})}}]),a}(u.Component),f=a(16),v=a.n(f),S=a(11),O=a.n(S);function y(e){var t=e.formRes,a=e.returnUrl;return Object(b.jsxs)(b.Fragment,{children:[!t&&Object(b.jsx)("h1",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0442\u043e \u0435\u0449\u0451 \u043d\u0435\u0442"}),t&&t.map((function(e,r){return Object(b.jsxs)("li",{className:O.a.ImageGalleryItem,children:[Object(b.jsx)("img",{onClick:function(){a(e)},src:e.webformatURL,alt:"tags",className:O.a.ImageGalleryItem_image}),r===t.length-12&&Object(b.jsx)("div",{id:"scroll"})]},e.id)}))]})}function x(e){var t=e.returnUrl,a=e.arrayImage,r=e.style;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("ul",{className:v.a.ImageGallery,style:r,children:Object(b.jsx)(y,{formRes:a,returnUrl:t})})})}var I=a(12),w=a.n(I),F=a(10),k=document.querySelector("#modal-root"),M=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.toggle()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.toggle()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.url;return Object(r.createPortal)(Object(b.jsx)("div",{className:w.a.Overlay,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:w.a.Modal,children:Object(b.jsx)("img",{src:e,alt:""})})}),k)}}]),a}(F.Component),N=a(17),E=a.n(N);function G(e){var t=e.morePage,a=e.total;return Object(b.jsxs)("button",{className:E.a.Button,onClick:t,children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e:",a,"foto ",Object(b.jsx)("br",{}),"Load More"]})}var U=a.p+"static/media/wooden-train-2066492_1920.c7803c8b.jpg";function A(){return Object(b.jsx)("div",{children:Object(b.jsx)("img",{width:"100%",src:U,alt:""})})}var L=a(6),T=a.n(L);function C(){return Object(b.jsxs)("div",{className:T.a.loader,children:[Object(b.jsx)("div",{className:"".concat(T.a.inner," ").concat(T.a.one)}),Object(b.jsx)("div",{className:"".concat(T.a.inner," ").concat(T.a.two)}),Object(b.jsx)("div",{className:"".concat(T.a.inner," ").concat(T.a.three)})]})}function P(e){var t=e.error;return Object(b.jsx)("h1",{children:t})}var R=a(13),B=a.n(R),Y=a(18),D={BASE_URL:"https://pixabay.com/api",IMAGE_TYPE:"photo",ORIENTATION:"horizontal",QUANTITY_PER_PAGE:12,KEY:"24908309-0f9f1bd491628a6ee7000b789"};function K(e,t){return V.apply(this,arguments)}function V(){return(V=Object(Y.a)(B.a.mark((function e(t,a){var r,n,o,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(D.BASE_URL,"/?image_type=").concat(D.IMAGE_TYPE,"&orientation=").concat(D.ORIENTATION,"&q=").concat(t,"&page=").concat(a,"&per_page=").concat(D.QUANTITY_PER_PAGE,"&key=").concat(D.KEY),e.next=3,fetch(r);case 3:return n=e.sent,e.next=6,n.json();case 6:return o=e.sent,c=o.hits.reduce((function(e,t){return e.push({id:t.id,webformatURL:t.webformatURL,largeImageURL:t.largeImageURL}),e}),[]),o.total>12&&c.length>0&&(c[0].loadMore=o.total),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchForm:"",showModal:!1,largeUrl:null,page:1,status:"idle",arrayImage:[],error:""},e.saveSearch=function(t){e.setState({searchForm:t})},e.apiArray=function(e,t){return K(e,t)},e.morePage=function(){e.setState((function(e){return{status:"pending",page:e.page+1}}))},e.startStatus=function(){e.setState({status:"idle"})},e.takeLarge=function(t){e.setState({largeUrl:t}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=this.state,n=r.searchForm,c=r.page,s=r.status;t.page===c?(t.searchForm!==n&&(this.setState({status:"pending",arrayImage:[]}),this.apiArray(n,1).then((function(e){if(!(e.length>0))return Promise.reject(new Error("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(n," \u043d\u0435\u0431\u044b\u043b\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u043a\u0440\u0443\u0442\u0438\u0442\u0435 \u0431\u0430\u0440\u0430\u0431\u0430\u043d")));a.setState({arrayImage:e,status:"resolved"})})).catch((function(e){return a.setState({error:e,status:"rejected"})}))),"rejected"===s&&setTimeout((function(){a.setState({status:"idle"})}),2e3)):this.apiArray(n,c).then((function(e){a.setState((function(t){return{arrayImage:[].concat(Object(o.a)(t.arrayImage),Object(o.a)(e)),status:"resolved"}})),document.getElementById("scroll").scrollIntoView({block:"center",behavior:"smooth"})}))}},{key:"render",value:function(){var e,t=this.state,a=t.showModal,r=t.largeUrl,n=t.status,o=t.arrayImage,c=t.error;return Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{saveSubmit:this.saveSearch}),Object(b.jsx)(x,{returnUrl:this.takeLarge,arrayImage:o,resetStatus:this.startStatus}),a&&Object(b.jsx)(M,{url:r.largeImageURL,toggle:this.toggleModal}),(null===(e=o[0])||void 0===e?void 0:e.loadMore)>12&&Object(b.jsx)(G,{morePage:this.morePage,total:o[0].loadMore}),"idle"===n&&Object(b.jsx)(A,{}),"pending"===n&&Object(b.jsx)(C,{}),"rejected"===n&&Object(b.jsx)(P,{error:c.message})]})}}]),a}(u.Component),J=q,Q=(a(24),a(25),document.querySelector("#root"));n.a.render(Object(b.jsx)(h.a.StrictMode,{children:Object(b.jsx)(J,{})}),Q)}],[[26,1,2]]]);
//# sourceMappingURL=main.8dd51eab.chunk.js.map