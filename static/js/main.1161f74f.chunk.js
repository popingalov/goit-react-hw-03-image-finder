(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],[,,,,,,function(t,e,r){t.exports={loader:"Spiner_loader__26rXR",inner:"Spiner_inner__2sk33",one:"Spiner_one__14V__","rotate-one":"Spiner_rotate-one__2wrvT",two:"Spiner_two__wEoJT","rotate-two":"Spiner_rotate-two__2mIgQ",three:"Spiner_three__FWGgw","rotate-three":"Spiner_rotate-three__1GBuD"}},function(t,e,r){t.exports={SearchForm:"SearchForm_SearchForm__2V9v9",SearchForm_button:"SearchForm_SearchForm_button__1-7tx",SearchForm_button_label:"SearchForm_SearchForm_button_label__1_LU2",SearchForm_input:"SearchForm_SearchForm_input__9LkGG","SearchForm-input":"SearchForm_SearchForm-input__3Qt9T"}},,,,,function(t,e,r){t.exports={ImageGallery:"ImageGallery_ImageGallery__2WkNB"}},function(t,e,r){t.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__B6VMq",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__1NBxZ"}},function(t,e,r){t.exports={Overlay:"Modal_Overlay__2GMCG",Modal:"Modal_Modal__zc-EP"}},,function(t,e,r){t.exports={Searchbar:"SearchBar_Searchbar__1t8pc"}},function(t,e,r){t.exports={Button:"Button_Button__j_pXH"}},,,,,,,,function(t,e,r){},function(t,e,r){"use strict";r.r(e);var a=r(8),o=r.n(a),n=r(9),c=r(2),s=r(3),i=r(5),l=r(4),u=r(1),m=r.n(u),h=r(16),d=r.n(h),j=r(7),p=r.n(j),b=r(0),g=function(t){Object(i.a)(r,t);var e=Object(l.a)(r);function r(){var t;Object(c.a)(this,r);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={searchForm:""},t.SaveValue=function(e){t.setState({searchForm:e.target.value})},t.Submit=function(e){if(e.preventDefault(),""===t.state.searchForm.trim())return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"),void t.setState({searchForm:""});t.props.saveSubmit(t.state.searchForm.toLowerCase()),t.setState({searchForm:""})},t}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsxs)("form",{className:p.a.SearchForm,onSubmit:this.Submit,children:[Object(b.jsx)("button",{type:"submit",className:p.a.SearchForm_button,children:Object(b.jsx)("span",{className:p.a.SearchForm_button_label,children:"Search"})}),Object(b.jsx)("input",{className:p.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchForm,onChange:this.SaveValue})]})}}]),r}(u.Component),_=function(t){Object(i.a)(r,t);var e=Object(l.a)(r);function r(){return Object(c.a)(this,r),e.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var t=this.props,e=t.status,r=t.saveSubmit,a=t.upLocalStatus;return Object(b.jsxs)("header",{className:d.a.Searchbar,children:[Object(b.jsx)(g,{saveSubmit:r}),Object(b.jsx)("button",{onClick:a,children:e?"\u041d\u0430\u0437\u0430\u0434 \u043a \u043f\u043e\u0438\u0441\u043a\u0443":"\u041c\u043e\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0444\u043e\u0442\u043e"})]})}}]),r}(u.Component),f=r(12),S=r.n(f),v=r(13),O=r.n(v);function y(t){var e=t.formRes,r=t.returnUrl;return Object(b.jsxs)(b.Fragment,{children:[!e&&Object(b.jsx)("h1",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0442\u043e \u0435\u0449\u0451 \u043d\u0435\u0442"}),e&&e.map((function(t,a){return Object(b.jsxs)("li",{className:O.a.ImageGalleryItem,children:[Object(b.jsx)("img",{onClick:function(){r(t)},src:t.webformatURL,alt:"tags",className:O.a.ImageGalleryItem_image}),a===e.length-12&&Object(b.jsx)("div",{id:"scroll"})]},a)}))]})}var x=r(6),F=r.n(x);function I(){return Object(b.jsxs)("div",{className:F.a.loader,children:[Object(b.jsx)("div",{className:"".concat(F.a.inner," ").concat(F.a.one)}),Object(b.jsx)("div",{className:"".concat(F.a.inner," ").concat(F.a.two)}),Object(b.jsx)("div",{className:"".concat(F.a.inner," ").concat(F.a.three)})]})}var w=r.p+"static/media/wooden-train-2066492_1920.c7803c8b.jpg";function k(){return Object(b.jsx)("div",{children:Object(b.jsx)("img",{width:"100%",src:w,alt:""})})}function N(t){var e=t.error;return Object(b.jsx)("h1",{children:e})}var M=r(17),G=r.n(M);function U(t){var e=t.morePage,r=t.total;return Object(b.jsxs)("button",{className:G.a.Button,onClick:e,children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e:",r,"foto ",Object(b.jsx)("br",{}),"Load More"]})}function E(t){var e=t.localHostStatus,r=t.returnUrl,a=t.storeFoto,o=t.morePage,n=t.status,c=t.arrayImage,s=t.errorMessage,i=t.resetStatus,l=t.clearHistory;return e?Object(b.jsxs)("ul",{className:S.a.ImageGallery,children:[a&&Object(b.jsx)("button",{onClick:l,children:"Clear History"}),Object(b.jsx)(y,{formRes:a,returnUrl:r})]}):"idle"===n?Object(b.jsx)(k,{}):"pending"===n?Object(b.jsx)(I,{}):"rejected"===n?(setTimeout((function(){i()}),2e3),Object(b.jsx)(N,{error:s})):"resolved"===n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:S.a.ImageGallery,children:Object(b.jsx)(y,{formRes:c,returnUrl:r})}),c[0].loadMore>12&&!e&&Object(b.jsx)(U,{morePage:o,total:c[0].loadMore})]}):void 0}var L=r(14),A=r.n(L),C=r(11),R=document.querySelector("#modal-root"),P=function(t){Object(i.a)(r,t);var e=Object(l.a)(r);function r(){var t;Object(c.a)(this,r);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&t.props.toggle()},t.handleBackdropClick=function(e){e.currentTarget===e.target&&t.props.toggle()},t}return Object(s.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t=this.props.url;return Object(a.createPortal)(Object(b.jsx)("div",{className:A.a.Overlay,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:A.a.Modal,children:Object(b.jsx)("img",{src:t,alt:""})})}),R)}}]),r}(C.Component),T=r(15),B=r.n(T),H=r(18),D={BASE_URL:"https://pixabay.com/api",IMAGE_TYPE:"photo",ORIENTATION:"horizontal",QUANTITY_PER_PAGE:12,KEY:"24908309-0f9f1bd491628a6ee7000b789"};function V(t,e){return Y.apply(this,arguments)}function Y(){return(Y=Object(H.a)(B.a.mark((function t(e,r){var a,o,n,c;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(D.BASE_URL,"/?image_type=").concat(D.IMAGE_TYPE,"&orientation=").concat(D.ORIENTATION,"&q=").concat(e,"&page=").concat(r,"&per_page=").concat(D.QUANTITY_PER_PAGE,"&key=").concat(D.KEY),t.next=3,fetch(a);case 3:return o=t.sent,t.next=6,o.json();case 6:return n=t.sent,c=n.hits.reduce((function(t,e){return t.push({id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}),t}),[]),n.total>12&&c.length>0&&(c[0].loadMore=n.total),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var J=function(t){Object(i.a)(r,t);var e=Object(l.a)(r);function r(){var t;Object(c.a)(this,r);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={searchForm:"",showModal:!1,localHostStatus:!1,storeFoto:null,largeUrl:null,page:1,status:"idle",arrayImage:[],error:""},t.saveSearch=function(e){t.setState({searchForm:e,localHostStatus:!1})},t.clearHistory=function(){t.setState({storeFoto:null,largeUrl:null})},t.apiArray=function(t,e){return V(t,e)},t.morePage=function(){t.setState((function(t){return{status:"pending",page:t.page+1}}))},t.startStatus=function(){t.setState({status:"idle"})},t.localStorStatus=function(){t.setState((function(t){return{localHostStatus:!t.localHostStatus}}))},t.takeLarge=function(e){t.setState({largeUrl:e}),t.toggleModal()},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var t=this,e=JSON.parse(localStorage.getItem("myFoto"));e&&this.setState({storeFoto:e}),window.onunload=function(){localStorage.setItem("myFoto",JSON.stringify(t.state.storeFoto))}}},{key:"componentDidUpdate",value:function(t,e){var r=this,a=this.state,o=a.largeUrl,c=a.searchForm,s=a.page,i=a.storeFoto;if(o){if(!i)return void this.setState({storeFoto:[o]});if(!i.find((function(t){return o.id===t.id})))return void this.setState((function(t){return{storeFoto:[].concat(Object(n.a)(t.storeFoto),[o])}}))}e.page===s?e.searchForm!==c&&(this.setState({status:"pending"}),this.apiArray(c,1).then((function(t){if(!(t.length>0))return Promise.reject(new Error("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(c," \u043d\u0435\u0431\u044b\u043b\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u043a\u0440\u0443\u0442\u0438\u0442\u0435 \u0431\u0430\u0440\u0430\u0431\u0430\u043d")));r.setState({arrayImage:t,status:"resolved"})})).catch((function(t){return r.setState({error:t,status:"rejected"})}))):this.apiArray(c,s).then((function(t){r.setState((function(e){return{arrayImage:[].concat(Object(n.a)(e.arrayImage),Object(n.a)(t)),status:"resolved"}})),document.getElementById("scroll").scrollIntoView({block:"center",behavior:"smooth"})}))}},{key:"render",value:function(){var t=this.state,e=t.localHostStatus,r=t.showModal,a=t.largeUrl,o=t.storeFoto,n=t.status,c=t.arrayImage,s=t.error;return Object(b.jsxs)("div",{children:[r&&Object(b.jsx)(P,{url:a.largeImageURL,toggle:this.toggleModal}),Object(b.jsx)(_,{saveSubmit:this.saveSearch,upLocalStatus:this.localStorStatus,status:e}),Object(b.jsx)(E,{clearHistory:this.clearHistory,morePage:this.morePage,returnUrl:this.takeLarge,status:n,storeFoto:o,localHostStatus:e,arrayImage:c,resetStatus:this.startStatus,errorMessage:s.message})]})}}]),r}(u.Component),K=J,q=(r(24),r(25),document.querySelector("#root"));o.a.render(Object(b.jsx)(m.a.StrictMode,{children:Object(b.jsx)(K,{})}),q)}],[[26,1,2]]]);
//# sourceMappingURL=main.1161f74f.chunk.js.map