{"version":3,"sources":["components/ImageGallery/spiner/Spiner.module.css","components/SearchForm/SearchForm.module.css","components/ImageGallery/ImageGallery.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/SearchBar/SearchBar.module.css","components/ImageGallery/Button/Button.module.css","components/SearchForm/SearchForm.js","components/SearchBar/SearchBar.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/spiner/Spiner.js","components/ImageGallery/status/wooden-train-2066492_1920.jpg","components/ImageGallery/status/Idle.js","components/ImageGallery/status/Rejected.js","components/ImageGallery/Button/Button.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","service/settings.js","service/Api.js","App.js","index.js"],"names":["module","exports","SearchForm","state","searchForm","SaveValue","e","setState","target","value","Submit","preventDefault","trim","alert","props","saveSubmit","toLowerCase","className","s","onSubmit","this","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","Component","SearchBar","status","upLocalStatus","Searchbar","onClick","ImageGalleryItem","formRes","returnUrl","map","el","ind","src","webformatURL","alt","ImageGalleryItem_image","length","id","Spiner","loader","inner","one","two","three","Idle","width","foto","Rejected","error","Button","morePage","total","ImageGallery","localHostStatus","storeFoto","arrayImage","errorMessage","resetStatus","clearHistory","setTimeout","loadMore","modalRoot","document","querySelector","Modal","handleKeyDown","code","toggle","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","url","createPortal","Overlay","URL","BASE_URL","IMAGE_TYPE","ORIENTATION","QUANTITY_PER_PAGE","KEY","takeImage","search","page","a","fetch","response","json","res","normalizeApi","hits","reduce","mass","push","largeImageURL","App","showModal","largeUrl","saveSearch","apiArray","Api","prevState","startStatus","localStorStatus","takeLarge","toggleModal","localArray","JSON","parse","localStorage","getItem","onunload","setItem","stringify","prevProps","find","then","Promise","reject","Error","catch","getElementById","scrollIntoView","block","behavior","message","root","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1161f74f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Spiner_loader__26rXR\",\"inner\":\"Spiner_inner__2sk33\",\"one\":\"Spiner_one__14V__\",\"rotate-one\":\"Spiner_rotate-one__2wrvT\",\"two\":\"Spiner_two__wEoJT\",\"rotate-two\":\"Spiner_rotate-two__2mIgQ\",\"three\":\"Spiner_three__FWGgw\",\"rotate-three\":\"Spiner_rotate-three__1GBuD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"SearchForm_SearchForm__2V9v9\",\"SearchForm_button\":\"SearchForm_SearchForm_button__1-7tx\",\"SearchForm_button_label\":\"SearchForm_SearchForm_button_label__1_LU2\",\"SearchForm_input\":\"SearchForm_SearchForm_input__9LkGG\",\"SearchForm-input\":\"SearchForm_SearchForm-input__3Qt9T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2WkNB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__B6VMq\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__1NBxZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2GMCG\",\"Modal\":\"Modal_Modal__zc-EP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__1t8pc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__j_pXH\"};","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport s from './SearchForm.module.css';\nexport default class SearchForm extends Component {\n  state = {\n    searchForm: '',\n  };\n\n  SaveValue = e => {\n    this.setState({\n      searchForm: e.target.value,\n    });\n  };\n\n  Submit = e => {\n    e.preventDefault();\n    if (this.state.searchForm.trim() === '') {\n      alert('Введите текст');\n      this.setState({ searchForm: '' });\n      return;\n    }\n    this.props.saveSubmit(this.state.searchForm.toLowerCase());\n    this.setState({ searchForm: '' });\n  };\n\n  render() {\n    return (\n      <form className={s.SearchForm} onSubmit={this.Submit}>\n        <button type=\"submit\" className={s.SearchForm_button}>\n          <span className={s.SearchForm_button_label}>Search</span>\n        </button>\n\n        <input\n          className={s.SearchForm_input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={this.state.searchForm}\n          onChange={this.SaveValue}\n        />\n      </form>\n    );\n  }\n}\n\nSearchForm.propTypes = {\n  saveSubmit: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport s from './SearchBar.module.css';\nimport SearchForm from 'components/SearchForm/SearchForm';\n\nexport default class SearchBar extends Component {\n  render() {\n    const { status, saveSubmit, upLocalStatus } = this.props;\n    return (\n      <header className={s.Searchbar}>\n        <SearchForm saveSubmit={saveSubmit} />\n        <button onClick={upLocalStatus}>\n          {!status ? 'Моя История фото' : 'Назад к поиску'}\n        </button>\n      </header>\n    );\n  }\n}\n\nSearchBar.propTypes = {\n  saveSubmit: PropTypes.func.isRequired,\n  status: PropTypes.bool.isRequired,\n  upLocalStatus: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\nexport default function ImageGalleryItem({ formRes, returnUrl }) {\n  return (\n    <>\n      {!formRes && <h1>Просмотренных фото ещё нет</h1>}\n      {formRes &&\n        formRes.map((el, ind) => (\n          <li key={ind} className={s.ImageGalleryItem}>\n            <img\n              onClick={() => {\n                returnUrl(el);\n              }}\n              src={el.webformatURL}\n              alt=\"tags\"\n              className={s.ImageGalleryItem_image}\n            />\n            {ind === formRes.length - 12 && <div id=\"scroll\"></div>}\n          </li>\n        ))}\n    </>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  formRes: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n    }),\n  ),\n  returnUrl: PropTypes.func.isRequired,\n};\n","import s from './Spiner.module.css';\n\nexport default function Spiner() {\n  return (\n    <div className={s.loader}>\n      <div className={`${s.inner} ${s.one}`}></div>\n      <div className={`${s.inner} ${s.two}`}></div>\n      <div className={`${s.inner} ${s.three}`}></div>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/wooden-train-2066492_1920.c7803c8b.jpg\";","import foto from './wooden-train-2066492_1920.jpg';\nexport default function Idle() {\n  return (\n    <div>\n      <img width=\"100%\" src={foto} alt=\"\" />\n    </div>\n  );\n}\n","import PropTypes from 'prop-types';\nexport default function Rejected({ error }) {\n  return <h1>{error}</h1>;\n}\n\nRejected.propTypes = {\n  error: PropTypes.string,\n};\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\nexport default function Button({ morePage, total }) {\n  return (\n    <button className={s.Button} onClick={morePage}>\n      Найдено:{total}foto <br />\n      Load More\n    </button>\n  );\n}\n\nButton.propTypes = {\n  morePage: PropTypes.func.isRequired,\n  total: PropTypes.number.isRequired,\n};\n","import { PropTypes } from 'prop-types';\n\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from './ImageGalleryItem/ImageGalleryItem';\nimport Spiner from './spiner/Spiner';\nimport Idle from './status/Idle';\nimport Rejected from './status/Rejected';\nimport Button from './Button/Button';\n\nexport default function ImageGallery({\n  localHostStatus,\n  returnUrl,\n  storeFoto,\n  morePage,\n  status,\n  arrayImage,\n  errorMessage,\n  resetStatus,\n  clearHistory,\n}) {\n  if (localHostStatus) {\n    return (\n      <ul className={s.ImageGallery}>\n        {storeFoto && <button onClick={clearHistory}>Clear History</button>}\n        <ImageGalleryItem formRes={storeFoto} returnUrl={returnUrl} />\n      </ul>\n    );\n  }\n  if (status === 'idle') {\n    return <Idle />;\n  }\n  if (status === 'pending') {\n    return <Spiner />;\n  }\n  if (status === 'rejected') {\n    setTimeout(() => {\n      resetStatus();\n    }, 2000);\n    return <Rejected error={errorMessage} />;\n  }\n\n  if (status === 'resolved') {\n    return (\n      <>\n        <ul className={s.ImageGallery}>\n          <ImageGalleryItem formRes={arrayImage} returnUrl={returnUrl} />\n        </ul>\n        {arrayImage[0].loadMore > 12 && !localHostStatus && (\n          <Button morePage={morePage} total={arrayImage[0].loadMore} />\n        )}\n      </>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  arrayImage: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n    }),\n  ),\n  errorMessage: PropTypes.string,\n  localHostStatus: PropTypes.bool.isRequired,\n  morePage: PropTypes.func.isRequired,\n  resetStatus: PropTypes.func.isRequired,\n  returnUrl: PropTypes.func.isRequired,\n  status: PropTypes.string.isRequired,\n  storeFoto: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n    }),\n  ),\n};\n","import PropTypes from 'prop-types';\nimport s from './Modal.module.css';\nimport { createPortal } from 'react-dom';\nimport { Component } from 'react/cjs/react.production.min';\nconst modalRoot = document.querySelector('#modal-root');\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    e.code === 'Escape' && this.props.toggle();\n  };\n  handleBackdropClick = e => {\n    e.currentTarget === e.target && this.props.toggle();\n  };\n  render() {\n    const { url } = this.props;\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={url} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  toggle: PropTypes.func.isRequired,\n  url: PropTypes.string.isRequired,\n};\n","const URL = {\n  BASE_URL: `https://pixabay.com/api`,\n  IMAGE_TYPE: `photo`,\n  ORIENTATION: `horizontal`,\n  QUANTITY_PER_PAGE: 12,\n  KEY: `24908309-0f9f1bd491628a6ee7000b789`,\n};\nexport default URL;\n","import URL from './settings';\n\nexport default async function takeImage(search, page) {\n  const url = `${URL.BASE_URL}/?image_type=${URL.IMAGE_TYPE}&orientation=${URL.ORIENTATION}&q=${search}&page=${page}&per_page=${URL.QUANTITY_PER_PAGE}&key=${URL.KEY}`;\n  const response = await fetch(url);\n  const res = await response.json();\n\n  const normalizeApi = res.hits.reduce((mass, el) => {\n    mass.push({\n      id: el.id,\n      webformatURL: el.webformatURL,\n      largeImageURL: el.largeImageURL,\n    });\n\n    return mass;\n  }, []);\n\n  if (res.total > 12 && normalizeApi.length > 0) {\n    normalizeApi[0].loadMore = res.total;\n  }\n  return normalizeApi;\n}\n","import React, { Component } from 'react';\nimport SearchBar from 'components/SearchBar/SearchBar';\nimport ImageGallery from 'components/ImageGallery/ImageGallery';\nimport Modal from 'components/Modal/Modal';\n/* import { ToastContainer } from 'react-toastify'; */\nimport Api from './service/Api';\nclass App extends Component {\n  state = {\n    searchForm: '',\n    showModal: false,\n    localHostStatus: false,\n    storeFoto: null,\n    largeUrl: null,\n    page: 1,\n    status: 'idle',\n    arrayImage: [],\n    error: '',\n  };\n\n  saveSearch = searchForm => {\n    this.setState({\n      searchForm,\n      localHostStatus: false,\n    });\n  };\n  componentDidMount() {\n    const localArray = JSON.parse(localStorage.getItem('myFoto'));\n    if (localArray) {\n      this.setState({\n        storeFoto: localArray,\n      });\n    }\n    window.onunload = () => {\n      localStorage.setItem('myFoto', JSON.stringify(this.state.storeFoto));\n    };\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const { largeUrl, searchForm, page, storeFoto } = this.state;\n\n    if (largeUrl) {\n      if (!storeFoto) {\n        this.setState({ storeFoto: [largeUrl] });\n        return;\n      }\n\n      if (!storeFoto.find(foto => largeUrl.id === foto.id)) {\n        this.setState(prevState => ({\n          storeFoto: [...prevState.storeFoto, largeUrl],\n        }));\n        return;\n      }\n    }\n\n    if (prevState.page !== page) {\n      this.apiArray(searchForm, page).then(res => {\n        this.setState(prevState => ({\n          arrayImage: [...prevState.arrayImage, ...res],\n          status: 'resolved',\n        }));\n        document\n          .getElementById('scroll')\n          .scrollIntoView({ block: 'center', behavior: 'smooth' });\n      });\n\n      return;\n    }\n    if (prevState.searchForm !== searchForm) {\n      this.setState({ status: 'pending' });\n      this.apiArray(searchForm, 1)\n        .then(res => {\n          if (res.length > 0) {\n            this.setState({\n              arrayImage: res,\n              status: 'resolved',\n            });\n            return;\n          }\n          return Promise.reject(\n            new Error(\n              `По вашему запросу ${searchForm} небыло совпадений, крутите барабан`,\n            ),\n          );\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n  }\n  clearHistory = () => {\n    this.setState({ storeFoto: null, largeUrl: null });\n  };\n  apiArray = (formRes, page) => {\n    return Api(formRes, page);\n  };\n  morePage = () => {\n    this.setState(prevState => ({\n      status: 'pending',\n      page: prevState.page + 1,\n    }));\n  };\n  startStatus = () => {\n    this.setState({\n      status: 'idle',\n    });\n  };\n\n  localStorStatus = () => {\n    this.setState(({ localHostStatus }) => ({\n      localHostStatus: !localHostStatus,\n    }));\n  };\n  takeLarge = largeUrl => {\n    this.setState({ largeUrl });\n    this.toggleModal();\n  };\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n  render() {\n    const {\n      localHostStatus,\n      showModal,\n      largeUrl,\n      storeFoto,\n      status,\n      arrayImage,\n      error,\n    } = this.state;\n    return (\n      <div>\n        {showModal && (\n          <Modal url={largeUrl.largeImageURL} toggle={this.toggleModal} />\n        )}\n        <SearchBar\n          saveSubmit={this.saveSearch}\n          upLocalStatus={this.localStorStatus}\n          status={localHostStatus}\n        />\n        <ImageGallery\n          clearHistory={this.clearHistory}\n          morePage={this.morePage}\n          returnUrl={this.takeLarge}\n          status={status}\n          storeFoto={storeFoto}\n          localHostStatus={localHostStatus}\n          arrayImage={arrayImage}\n          resetStatus={this.startStatus}\n          errorMessage={error.message}\n        />\n      </div>\n    );\n  }\n}\n/*  <ToastContainer autoClose={3000} />; */\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\nimport react from 'react';\nimport 'modern-normalize/modern-normalize.css';\nimport 'index.css';\nconst root = document.querySelector('#root');\n\nReactDOM.render(\n  <react.StrictMode>\n    <App />\n  </react.StrictMode>,\n  root,\n);\n/* function testXor(numbers) {\n  return numbers.reduce((acc, e) => {\n    console.log(acc, e);\n    return acc ^ e;\n  });\n}\nconst test = [1, 1, 2, 2, 8, 7, 3, 3, 4, 4];\nconsole.log(testXor(test)); */\n"],"sourceRoot":""}