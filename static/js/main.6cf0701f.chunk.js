(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports={loader:"Spiner_loader__26rXR",inner:"Spiner_inner__2sk33",one:"Spiner_one__14V__","rotate-one":"Spiner_rotate-one__2wrvT",two:"Spiner_two__wEoJT","rotate-two":"Spiner_rotate-two__2mIgQ",three:"Spiner_three__FWGgw","rotate-three":"Spiner_rotate-three__1GBuD"}},function(e,t,a){e.exports={SearchForm:"SearchForm_SearchForm__2V9v9",SearchForm_button:"SearchForm_SearchForm_button__1-7tx",SearchForm_button_label:"SearchForm_SearchForm_button_label__1_LU2",SearchForm_input:"SearchForm_SearchForm_input__9LkGG","SearchForm-input":"SearchForm_SearchForm-input__3Qt9T"}},,,,function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__2WkNB"}},function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__B6VMq",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__1NBxZ"}},,function(e,t,a){e.exports={Overlay:"Modal_Overlay__2GMCG",Modal:"Modal_Modal__zc-EP"}},,function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__1t8pc"}},,function(e,t,a){e.exports={Button:"Button_Button__j_pXH"}},,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(8),o=a.n(r),n=a(2),c=a(3),s=a(5),i=a(4),l=a(1),u=a.n(l),m=a(16),h=a.n(m),p=a(7),j=a.n(p),d=a(0),b=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={searchForm:""},e.SaveValue=function(t){e.setState({searchForm:t.target.value})},e.Submit=function(t){if(t.preventDefault(),""===e.state.searchForm.trim())return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"),void e.setState({searchForm:""});e.props.saveSubmit(e.state.searchForm.toLowerCase()),e.setState({searchForm:""})},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("form",{className:j.a.SearchForm,onSubmit:this.Submit,children:[Object(d.jsx)("button",{type:"submit",className:j.a.SearchForm_button,children:Object(d.jsx)("span",{className:j.a.SearchForm_button_label,children:"Search"})}),Object(d.jsx)("input",{className:j.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchForm,onChange:this.SaveValue})]})}}]),a}(l.Component),f=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.status,a=e.saveSubmit,r=e.upLocalStatus;return Object(d.jsxs)("header",{className:h.a.Searchbar,children:[Object(d.jsx)(b,{saveSubmit:a}),Object(d.jsx)("button",{onClick:r,children:t?"\u041d\u0430\u0437\u0430\u0434 \u043a \u043f\u043e\u0438\u0441\u043a\u0443":"\u041c\u043e\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0444\u043e\u0442\u043e"})]})}}]),a}(l.Component),g=a(15),_=a(11),S=a.n(_),O=a(12),v=a.n(O);function y(e){var t=e.formRes,a=e.returnUrl;return Object(d.jsxs)(d.Fragment,{children:[!t&&Object(d.jsx)("h1",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0442\u043e \u0435\u0449\u0451 \u043d\u0435\u0442"}),t&&t.map((function(e,t){return Object(d.jsx)("li",{className:v.a.ImageGalleryItem,children:Object(d.jsx)("img",{onClick:function(){a(e)},src:e.webformatURL,alt:"tags",className:v.a.ImageGalleryItem_image})},t)}))]})}var x=a(13),F=a.n(x),I=a(17),w={BASE_URL:"https://pixabay.com/api",IMAGE_TYPE:"photo",ORIENTATION:"horizontal",QUANTITY_PER_PAGE:12,KEY:"24908309-0f9f1bd491628a6ee7000b789"};function k(e,t){return N.apply(this,arguments)}function N(){return(N=Object(I.a)(F.a.mark((function e(t,a){var r,o,n,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(w.BASE_URL,"/?image_type=").concat(w.IMAGE_TYPE,"&orientation=").concat(w.ORIENTATION,"&q=").concat(t,"&page=").concat(a,"&per_page=").concat(w.QUANTITY_PER_PAGE,"&key=").concat(w.KEY),e.next=3,fetch(r);case 3:return o=e.sent,e.next=6,o.json();case 6:return n=e.sent,c=n.hits.reduce((function(e,t){return e.push({id:t.id,webformatURL:t.webformatURL,largeImageURL:t.largeImageURL}),e}),[]),n.total>12&&c.length>0&&(c[0].loadMore=n.total),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=a(6),M=a.n(G);function U(){return Object(d.jsxs)("div",{className:M.a.loader,children:[Object(d.jsx)("div",{className:"".concat(M.a.inner," ").concat(M.a.one)}),Object(d.jsx)("div",{className:"".concat(M.a.inner," ").concat(M.a.two)}),Object(d.jsx)("div",{className:"".concat(M.a.inner," ").concat(M.a.three)})]})}var E=a.p+"static/media/wooden-train-2066492_1920.c7803c8b.jpg";function R(){return Object(d.jsx)("div",{children:Object(d.jsx)("img",{width:"100%",src:E,alt:""})})}function L(e){var t=e.error;return Object(d.jsx)("h1",{children:t.message})}var A=a(18),C=a.n(A);function T(e){var t=e.morePage,a=e.total;return Object(d.jsxs)("button",{className:C.a.Button,onClick:t,children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e:",a,"foto ",Object(d.jsx)("br",{}),"Load More"]})}var B=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={arrayImage:null,status:"idle",error:"",storeFoto:null,page:1},e.morePage=function(){e.setState((function(e){return{page:e.page+1}}))},e.apiArray=function(e,t){return k(e,t)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(JSON.parse(localStorage.getItem("myFoto"))){var e=JSON.parse(localStorage.getItem("myFoto"));this.setState({storeFoto:e})}}},{key:"componentDidUpdate",value:function(e,t){var a=this,r=this.props,o=r.formRes,n=r.localFoto,c=this.state.page,s=JSON.parse(localStorage.getItem("myFoto"));if(n!==e.localFoto){if(!s)return localStorage.setItem("myFoto",JSON.stringify([n])),void this.setState({storeFoto:[n]});if(!s.find((function(e){return n.id===e.id})))return s.push(n),localStorage.setItem("myFoto",JSON.stringify(s)),void this.setState({storeFoto:s})}t.page===c?e.formRes!==o&&(this.setState({status:"pending"}),this.apiArray(o,c).then((function(e){if(!(e.length>0))return Promise.reject(new Error("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(o," \u043d\u0435\u0431\u044b\u043b\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u043a\u0440\u0443\u0442\u0438\u0442\u0435 \u0431\u0430\u0440\u0430\u0431\u0430\u043d")));a.setState({arrayImage:e,status:"resolved"})})).catch((function(e){return a.setState({error:e,status:"rejected"})}))):this.apiArray(o,c).then((function(e){a.setState((function(t){return{arrayImage:[].concat(Object(g.a)(t.arrayImage),Object(g.a)(e))}}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.arrayImage,r=t.status,o=t.error,n=t.storeFoto,c=this.props,s=c.localHostStatus,i=c.returnUrl;return s?Object(d.jsx)("ul",{className:S.a.ImageGallery,children:Object(d.jsx)(y,{formRes:n,returnUrl:i})}):"idle"===r?Object(d.jsx)(R,{}):"pending"===r?Object(d.jsx)(U,{}):"rejected"===r?(setTimeout((function(){e.setState({status:"idle"})}),2e3),Object(d.jsx)(L,{error:o})):"resolved"===r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("ul",{className:S.a.ImageGallery,children:Object(d.jsx)(y,{formRes:a,returnUrl:i})}),a[0].loadMore>12&&!s&&Object(d.jsx)(T,{morePage:this.morePage,total:a[0].loadMore})]}):void 0}}]),a}(l.Component),P=a(14),D=a.n(P),J=a(10),H=document.querySelector("#modal-root"),Y=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.toggle()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.toggle()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.url;return Object(r.createPortal)(Object(d.jsx)("div",{className:D.a.Overlay,onClick:this.handleBackdropClick,children:Object(d.jsx)("div",{className:D.a.Modal,children:Object(d.jsx)("img",{src:e,alt:""})})}),H)}}]),a}(J.Component),K=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={searchForm:"",showModal:!1,localHostStatus:!1,largeUrl:null},e.local=[],e.saveSearch=function(t){e.setState({searchForm:t})},e.localStorStatus=function(){e.setState((function(e){return{localHostStatus:!e.localHostStatus}}))},e.takeLarge=function(t){e.setState({largeUrl:t}),e.toggleModal()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.state,t=e.localHostStatus,a=e.searchForm,r=e.showModal,o=e.largeUrl;return Object(d.jsxs)("div",{children:[r&&Object(d.jsx)(Y,{url:o.largeImageURL,toggle:this.toggleModal}),Object(d.jsx)(f,{saveSubmit:this.saveSearch,upLocalStatus:this.localStorStatus,status:t}),Object(d.jsx)(B,{returnUrl:this.takeLarge,formRes:a,localFoto:o,localHostStatus:t})]})}}]),a}(l.Component),V=K,q=(a(24),a(25),document.querySelector("#root"));o.a.render(Object(d.jsx)(u.a.StrictMode,{children:Object(d.jsx)(V,{})}),q)}],[[26,1,2]]]);
//# sourceMappingURL=main.6cf0701f.chunk.js.map