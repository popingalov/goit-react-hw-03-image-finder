(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],[,,,,,,function(t,e,a){t.exports={loader:"Spiner_loader__26rXR",inner:"Spiner_inner__2sk33",one:"Spiner_one__14V__","rotate-one":"Spiner_rotate-one__2wrvT",two:"Spiner_two__wEoJT","rotate-two":"Spiner_rotate-two__2mIgQ",three:"Spiner_three__FWGgw","rotate-three":"Spiner_rotate-three__1GBuD"}},function(t,e,a){t.exports={SearchForm:"SearchForm_SearchForm__2V9v9",SearchForm_button:"SearchForm_SearchForm_button__1-7tx",SearchForm_button_label:"SearchForm_SearchForm_button_label__1_LU2",SearchForm_input:"SearchForm_SearchForm_input__9LkGG","SearchForm-input":"SearchForm_SearchForm-input__3Qt9T"}},,,,function(t,e,a){t.exports={ImageGallery:"ImageGallery_ImageGallery__2WkNB"}},function(t,e,a){t.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__B6VMq",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__1NBxZ"}},function(t,e,a){t.exports={Overlay:"Modal_Overlay__2GMCG",Modal:"Modal_Modal__zc-EP"}},,,function(t,e,a){t.exports={Searchbar:"SearchBar_Searchbar__1t8pc"}},function(t,e,a){t.exports={Button:"Button_Button__j_pXH"}},,,,,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var r=a(8),o=a.n(r),n=a(15),c=a(2),s=a(3),i=a(5),l=a(4),u=a(1),m=a.n(u),h=a(16),d=a.n(h),j=a(7),p=a.n(j),g=a(0),b=function(t){Object(i.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={searchForm:""},t.SaveValue=function(e){t.setState({searchForm:e.target.value})},t.Submit=function(e){if(e.preventDefault(),""===t.state.searchForm.trim())return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"),void t.setState({searchForm:""});t.props.saveSubmit(t.state.searchForm.toLowerCase()),t.setState({searchForm:""})},t}return Object(s.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("form",{className:p.a.SearchForm,onSubmit:this.Submit,children:[Object(g.jsx)("button",{type:"submit",className:p.a.SearchForm_button,children:Object(g.jsx)("span",{className:p.a.SearchForm_button_label,children:"Search"})}),Object(g.jsx)("input",{className:p.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchForm,onChange:this.SaveValue})]})}}]),a}(u.Component),S=function(t){Object(i.a)(a,t);var e=Object(l.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.status,a=t.saveSubmit,r=t.upLocalStatus;return Object(g.jsxs)("header",{className:d.a.Searchbar,children:[Object(g.jsx)(b,{saveSubmit:a}),Object(g.jsx)("button",{onClick:r,children:e?"\u041d\u0430\u0437\u0430\u0434 \u043a \u043f\u043e\u0438\u0441\u043a\u0443":"\u041c\u043e\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0444\u043e\u0442\u043e"})]})}}]),a}(u.Component),_=a(11),f=a.n(_),v=a(12),O=a.n(v);function y(t){var e=t.formRes,a=t.returnUrl;return Object(g.jsxs)(g.Fragment,{children:[!e&&Object(g.jsx)("h1",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0442\u043e \u0435\u0449\u0451 \u043d\u0435\u0442"}),e&&e.map((function(t,r){return Object(g.jsxs)("li",{className:O.a.ImageGalleryItem,children:[Object(g.jsx)("img",{onClick:function(){a(t)},src:t.webformatURL,alt:"tags",className:O.a.ImageGalleryItem_image}),r===e.length-12&&Object(g.jsx)("div",{id:"scroll"})]},r)}))]})}var x=a(6),I=a.n(x);function F(){return Object(g.jsxs)("div",{className:I.a.loader,children:[Object(g.jsx)("div",{className:"".concat(I.a.inner," ").concat(I.a.one)}),Object(g.jsx)("div",{className:"".concat(I.a.inner," ").concat(I.a.two)}),Object(g.jsx)("div",{className:"".concat(I.a.inner," ").concat(I.a.three)})]})}var w=a.p+"static/media/wooden-train-2066492_1920.c7803c8b.jpg";function k(){return Object(g.jsx)("div",{children:Object(g.jsx)("img",{width:"100%",src:w,alt:""})})}function N(t){var e=t.error;return Object(g.jsx)("h1",{children:e})}var M=a(17),G=a.n(M);function U(t){var e=t.morePage,a=t.total;return Object(g.jsxs)("button",{className:G.a.Button,onClick:e,children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e:",a,"foto ",Object(g.jsx)("br",{}),"Load More"]})}function E(t){var e=t.localHostStatus,a=t.returnUrl,r=t.storeFoto,o=t.morePage,n=t.status,c=t.arrayImage,s=t.errorMessage,i=t.resetStatus;return e?Object(g.jsx)("ul",{className:f.a.ImageGallery,children:Object(g.jsx)(y,{formRes:r,returnUrl:a})}):"idle"===n?Object(g.jsx)(k,{}):"pending"===n?Object(g.jsx)(F,{}):"rejected"===n?(setTimeout((function(){i()}),2e3),Object(g.jsx)(N,{error:s})):"resolved"===n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("ul",{className:f.a.ImageGallery,children:Object(g.jsx)(y,{formRes:c,returnUrl:a})}),c[0].loadMore>12&&!e&&Object(g.jsx)(U,{morePage:o,total:c[0].loadMore})]}):void 0}var L=a(13),A=a.n(L),R=a(10),P=document.querySelector("#modal-root"),T=function(t){Object(i.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&t.props.toggle()},t.handleBackdropClick=function(e){e.currentTarget===e.target&&t.props.toggle()},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t=this.props.url;return Object(r.createPortal)(Object(g.jsx)("div",{className:A.a.Overlay,onClick:this.handleBackdropClick,children:Object(g.jsx)("div",{className:A.a.Modal,children:Object(g.jsx)("img",{src:t,alt:""})})}),P)}}]),a}(R.Component),B=a(14),C=a.n(B),D=a(18),H={BASE_URL:"https://pixabay.com/api",IMAGE_TYPE:"photo",ORIENTATION:"horizontal",QUANTITY_PER_PAGE:12,KEY:"24908309-0f9f1bd491628a6ee7000b789"};function J(t,e){return V.apply(this,arguments)}function V(){return(V=Object(D.a)(C.a.mark((function t(e,a){var r,o,n,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(H.BASE_URL,"/?image_type=").concat(H.IMAGE_TYPE,"&orientation=").concat(H.ORIENTATION,"&q=").concat(e,"&page=").concat(a,"&per_page=").concat(H.QUANTITY_PER_PAGE,"&key=").concat(H.KEY),t.next=3,fetch(r);case 3:return o=t.sent,t.next=6,o.json();case 6:return n=t.sent,c=n.hits.reduce((function(t,e){return t.push({id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}),t}),[]),n.total>12&&c.length>0&&(c[0].loadMore=n.total),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y=function(t){Object(i.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={searchForm:"",showModal:!1,localHostStatus:!1,storeFoto:null,largeUrl:null,page:1,status:"idle",arrayImage:[],error:""},t.saveSearch=function(e){t.setState({searchForm:e,localHostStatus:!1})},t.apiArray=function(t,e){return J(t,e)},t.morePage=function(){t.setState((function(t){return{status:"pending",page:t.page+1}}))},t.startStatus=function(){t.setState({status:"idle"})},t.localStorStatus=function(){t.setState((function(t){return{localHostStatus:!t.localHostStatus}}))},t.takeLarge=function(e){t.setState({largeUrl:e}),t.toggleModal()},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=JSON.parse(localStorage.getItem("myFoto"));t&&this.setState({storeFoto:t})}},{key:"componentDidUpdate",value:function(t,e){var a=this,r=this.state,o=r.largeUrl,c=r.searchForm,s=r.page,i=JSON.parse(localStorage.getItem("myFoto"));if(o){if(!i)return localStorage.setItem("myFoto",JSON.stringify([o])),void this.setState({storeFoto:[o]});if(!i.find((function(t){return o.id===t.id})))return i.push(o),localStorage.setItem("myFoto",JSON.stringify(i)),void this.setState({storeFoto:i})}e.page===s?e.searchForm!==c&&(this.setState({status:"pending"}),this.apiArray(c,1).then((function(t){if(!(t.length>0))return Promise.reject(new Error("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(c," \u043d\u0435\u0431\u044b\u043b\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u043a\u0440\u0443\u0442\u0438\u0442\u0435 \u0431\u0430\u0440\u0430\u0431\u0430\u043d")));a.setState({arrayImage:t,status:"resolved"})})).catch((function(t){return a.setState({error:t,status:"rejected"})}))):this.apiArray(c,s).then((function(t){a.setState((function(e){return{arrayImage:[].concat(Object(n.a)(e.arrayImage),Object(n.a)(t)),status:"resolved"}})),document.getElementById("scroll").scrollIntoView({block:"center",behavior:"smooth"})}))}},{key:"render",value:function(){var t=this.state,e=t.localHostStatus,a=t.showModal,r=t.largeUrl,o=t.storeFoto,n=t.status,c=t.arrayImage,s=t.error;return Object(g.jsxs)("div",{children:[a&&Object(g.jsx)(T,{url:r.largeImageURL,toggle:this.toggleModal}),Object(g.jsx)(S,{saveSubmit:this.saveSearch,upLocalStatus:this.localStorStatus,status:e}),Object(g.jsx)(E,{morePage:this.morePage,returnUrl:this.takeLarge,status:n,storeFoto:o,localHostStatus:e,arrayImage:c,resetStatus:this.startStatus,errorMessage:s.message})]})}}]),a}(u.Component),K=Y,q=(a(24),a(25),document.querySelector("#root"));o.a.render(Object(g.jsx)(m.a.StrictMode,{children:Object(g.jsx)(K,{})}),q)}],[[26,1,2]]]);
//# sourceMappingURL=main.03af6eaf.chunk.js.map